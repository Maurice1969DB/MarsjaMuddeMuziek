<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"{{ with .Site.LanguageCode }} xml:lang="{{ . }}" lang="{{ . }}"{{ end }}>
{{- $pageTitle := .Title -}}
{{- if eq .Kind "404" -}}
  {{- if eq .Lang "nl" -}}
    {{- $pageTitle = "Pagina niet gevonden" -}}
  {{- else -}}
    {{- $pageTitle = "Page not found" -}}
  {{- end -}}
{{- end -}}
<head>
  {{ if .IsTranslated }}
    {{ range .Translations }}
      <link rel="alternate" hreflang="{{ .Language.Lang }}" href="{{ .Permalink }}" title="{{ .Language.LanguageName }}">
    {{ end }}
  {{ end }}
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://gc.zgo.at https://embed.email-provider.eu;
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com;
    font-src 'self' https://fonts.gstatic.com https://cdnjs.cloudflare.com;
    img-src 'self' data: https:;
    frame-src https://www.youtube-nocookie.com https://w.soundcloud.com https://*.email-provider.eu https://*.laposta.nl;
    connect-src 'self' https://marsjamuddemuziek.goatcounter.com https://formspree.io https://embed.email-provider.eu;
  ">
  {{ hugo.Generator }}

  {{ if .IsHome -}}
    <title>{{ .Site.Title }}</title>
  {{- else -}}
    <title>{{ $pageTitle }} &middot; {{ .Site.Title }}</title>
  {{- end }}

  <meta name="description" content="{{ if .IsHome }}{{ $.Site.Params.description }}{{ else }}{{ with .Description }}{{ . }}{{ else }}{{ $.Site.Params.description }}{{ end }}{{ end }}" />

  <!-- Canonical URL -->
  <link rel="canonical" href="{{ .Permalink }}">

  <!-- Google Search Console verification -->
  {{ with .Site.Params.googleSiteVerification }}
  <meta name="google-site-verification" content="{{ . }}">
  {{ end }}

  <!-- Keywords -->
  <meta name="keywords" content="{{ if .Params.keywords }}{{ delimit .Params.keywords ", " }}{{ else }}{{ if eq .Lang "nl" }}oude muziek, zangles, workshops, Hildegard von Bingen, middeleeuwse muziek, gregoriaans, Marsja Mudde{{ else }}early music, singing lessons, workshops, Hildegard von Bingen, medieval music, gregorian chant, Marsja Mudde{{ end }}{{ end }}">

  <!-- Author -->
  <meta name="author" content="Marsja Mudde">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
  <meta property="og:url" content="{{ .Permalink }}">
  <meta property="og:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ $pageTitle }} - {{ .Site.Title }}{{ end }}">
  <meta property="og:description" content="{{ if .IsHome }}{{ $.Site.Params.description }}{{ else }}{{ with .Description }}{{ . }}{{ else }}{{ $.Site.Params.description }}{{ end }}{{ end }}">
  <meta property="og:image" content="{{ `images/default.jpeg` | absURL }}">
  <meta property="og:locale" content="{{ .Lang }}">
  <meta property="og:site_name" content="{{ .Site.Title }}">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ $pageTitle }} - {{ .Site.Title }}{{ end }}">
  <meta name="twitter:description" content="{{ if .IsHome }}{{ $.Site.Params.description }}{{ else }}{{ with .Description }}{{ . }}{{ else }}{{ $.Site.Params.description }}{{ end }}{{ end }}">
  <meta name="twitter:image" content="{{ `images/default.jpeg` | absURL }}">

  <link type="text/css" rel="stylesheet" href="{{ `css/print.css` | relURL }}" media="print">
  <link type="text/css" rel="stylesheet" href="{{ `css/poole.css` | relURL }}">
  <link type="text/css" rel="stylesheet" href="{{ `css/hyde.css` | relURL }}">
  <link type="text/css" rel="stylesheet" href="{{ `css/custom.css` | relURL }}">

  {{ partial "theme-color.html" . }}

  {{ range $.Site.Params.customCss -}}
    <link type="text/css" rel="stylesheet" href="{{ . | relURL }}">
  {{- end}}

  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
        integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
        crossorigin="anonymous" />

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="shortcut icon" href="/favicon.ico">

  <!-- RSS -->
  {{ range .AlternativeOutputFormats -}}
    {{ printf `<link href="%s" rel="%s" type="%s" title="%s" />` .Permalink .Rel .MediaType.Type $.Site.Title | safeHTML }}
  {{ end -}}

  <!-- Structured Data -->
  {{ partial "json-ld.html" . }}
</head>
<body>
  <a href="#main-content" class="skip-link">{{ if eq .Lang "nl" }}Ga naar inhoud{{ else }}Skip to content{{ end }}</a>

  {{ partial "popup.html" . }}
  {{ partial "sidebar.html" . }}

  <main class="content container" id="main-content">
    {{ partial "header.html" . }}
    {{ partial "breadcrumbs.html" . }}
    {{ block "main" . -}}{{- end }}
  </main>

  {{ partial "footer.html" . }}

  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
          integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
          crossorigin="anonymous"></script>

  <script src="{{ `js/jquery.min.js` | relURL }}"></script>
  <script src="{{ `js/soho.js` | relURL }}"></script>
  <script src="{{ `js/marsja.js` | relURL }}"></script>

  {{ range $.Site.Params.customJs -}}
    <script src="{{ . | relURL }}"></script>
  {{- end}}

  {{ if not hugo.IsServer }}
    <!-- GoatCounter Analytics -->
    <script data-goatcounter="https://marsjamuddemuziek.goatcounter.com/count"
            async src="//gc.zgo.at/count.js"></script>
  {{ end }}
</body>
</html>