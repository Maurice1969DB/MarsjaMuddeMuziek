{{ define "main" }}
<div class="calendar">
    {{ $events := where .Site.RegularPages "Type" "events" }}
    {{ $workshops := where .Site.RegularPages "Type" "workshops" }}
    {{ $all := union $events $workshops }}
    {{ $upcomingEvents := where $all "Date" "ge" now }}
    {{ $sortedUpcomingEvents := sort $upcomingEvents "Date" "asc" }}

    {{ if $sortedUpcomingEvents }}
    <div class="events-grid">
        {{ range $sortedUpcomingEvents }}
        <a href="{{ with .Params.linkTo }}{{ . }}{{ else }}{{ .RelPermalink }}{{ end }}" class="event-card {{ if .Params.online }}event-card--online{{ else if eq .Type "events" }}event-card--concert{{ else }}event-card--workshop{{ end }}">
            <div class="event-card__date">
                <span class="event-card__day{{ with .Params.endDate }} event-card__day--range{{ end }}">{{ .Date.Format "02" }}{{ with .Params.endDate }}{{ $end := time . }}<span class="event-card__day-separator">+</span>{{ $end.Format "02" }}{{ end }}</span>
                <span class="event-card__month">{{ if eq $.Lang "nl" }}{{ index (split "jan|feb|mrt|apr|mei|jun|jul|aug|sep|okt|nov|dec" "|") (sub (int (.Date.Format "1")) 1) }}{{ else }}{{ .Date.Format "Jan" }}{{ end }}</span>
                <span class="event-card__year">{{ .Date.Format "2006" }}</span>
            </div>
            <div class="event-card__content">
                <span class="event-card__type">{{ if .Params.online }}{{ if eq $.Lang "nl" }}Online Workshop{{ else }}Online Workshop{{ end }}{{ else if eq .Type "events" }}{{ if eq $.Lang "nl" }}Concert{{ else }}Concert{{ end }}{{ else }}Workshop{{ end }}</span>
                <h3 class="event-card__title">{{ .Title }}</h3>
                {{ with .Description }}<p class="event-card__description">{{ . }}</p>{{ end }}
            </div>
            <div class="event-card__arrow">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                </svg>
            </div>
        </a>
        {{ end }}
    </div>

    {{ else }}
    <p class="no-events">{{ if eq .Lang "nl" }}Er zijn momenteel geen geplande evenementen.{{ else }}There are currently no scheduled events.{{ end }}</p>
    {{ end }}
</div>
{{ end }}
